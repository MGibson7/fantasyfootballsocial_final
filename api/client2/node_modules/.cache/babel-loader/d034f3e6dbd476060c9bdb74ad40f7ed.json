{"ast":null,"code":"var _jsxFileName = \"/home/thegibson/fantasyfootballsocial_final/client2/src/components/post/Post.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./post.css\";\nimport { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { format } from \"timeago.js\";\nimport { Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Post(_ref) {\n  _s();\n\n  let {\n    post\n  } = _ref;\n  const [like, setLike] = useState(post.likes.length);\n  const [isLiked, setIsLiked] = useState(false);\n  const [user, setUser] = useState({});\n  const pf = process.env.REACT_APP_PUBLIC_FOLDER;\n  const {\n    user: currentUser\n  } = useContext(AuthContext);\n  useEffect(() => {\n    setIsLiked(post.likes.includes(currentUser._id));\n  }, [currentUser._id, post.likes]);\n  useEffect(() => {\n    const fetchUser = async () => {\n      const res = await axios.get(`/api/users?userId=${post.userId}`);\n      setUser(res.data);\n    };\n\n    fetchUser();\n  }, [post.userId]);\n\n  const likeHandler = () => {\n    try {\n      axios.put(\"/api/posts/\" + post._id + \"like\", {\n        userId: currentUser._id\n      });\n    } catch (err) {}\n\n    setLike(isLiked ? like - 1 : like + 1);\n    setIsLiked(!isLiked);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"postWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"postTop\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"postTopLeft\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `profile/${user.username}`,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"postProfileImg\",\n              src: user.profilePicture ? pf + user.profilePicture : pf + \"/football.png\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"postUsername\",\n            children: user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"postDate\",\n            children: [\" \", format(post.createdAt)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"postTopRight\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"vertRight\",\n            src: \"/assets/morevert.png\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"postCenter\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"postText\",\n          children: post === null || post === void 0 ? void 0 : post.desc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"postImg\",\n          src: pf + post.img,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"postBottom\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"postBottomLeft\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"likeIcon\",\n            src: `${pf}/football.png`,\n            onClick: likeHandler,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"likeIcon\",\n            src: `${pf}/super.png`,\n            onClick: likeHandler,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"postLikeCounter\",\n            children: [like, \" people like it\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Post, \"YjVxu9+uwq4hsW/8SO8XqR12MYg=\");\n\n_c = Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["useState","useEffect","useContext","axios","format","Link","AuthContext","Post","post","like","setLike","likes","length","isLiked","setIsLiked","user","setUser","pf","process","env","REACT_APP_PUBLIC_FOLDER","currentUser","includes","_id","fetchUser","res","get","userId","data","likeHandler","put","err","username","profilePicture","createdAt","desc","img"],"sources":["/home/thegibson/fantasyfootballsocial_final/client2/src/components/post/Post.jsx"],"sourcesContent":["import \"./post.css\"\nimport { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\"\nimport {format} from \"timeago.js\"\nimport {Link} from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\n\n\nexport default function Post({post}) {\n    const [like, setLike] = useState(post.likes.length)\n    const [isLiked, setIsLiked] = useState(false)\n    const [user, setUser] = useState({});\n    const pf = process.env.REACT_APP_PUBLIC_FOLDER\n    const {user:currentUser} = useContext(AuthContext)\n\n    useEffect(() =>{\n        setIsLiked(post.likes.includes(currentUser._id))\n    }, [currentUser._id, post.likes])\n\n    useEffect(()=>{\n        const fetchUser = async () =>{\n          const res = await axios.get(`/api/users?userId=${post.userId}`)\n          setUser(res.data)\n          \n        }\n        \n        fetchUser();\n      }, [post.userId])\n\n    const likeHandler =()=>{\n        try{\n            axios.put(\"/api/posts/\" + post._id + \"like\", {userId:currentUser._id})\n\n        }catch(err){\n\n        }\n        setLike(isLiked ? like-1 : like+1)\n        setIsLiked(!isLiked)\n    }\n  return (\n    <div className=\"post\">\n        <div className=\"postWrapper\">\n            <div className=\"postTop\">\n                <div className=\"postTopLeft\">\n                    <Link to= {`profile/${user.username}`}>\n                        <img className=\"postProfileImg\" src={user.profilePicture ? pf + user.profilePicture : pf+\"/football.png\"} alt=\"\" />\n                    </Link>\n                    \n                    <span className=\"postUsername\">{user.username}</span>\n                    <span className=\"postDate\"> {format(post.createdAt)}</span>\n\n                </div>\n                <div className=\"postTopRight\">\n                    <img className=\"vertRight\" src=\"/assets/morevert.png\" alt=\"\" />\n\n                </div>\n\n            </div>\n            <div className=\"postCenter\">\n                <span className=\"postText\">{post?.desc}</span>\n                <img className= \"postImg\" src={pf+post.img} alt=\"\" />\n\n            </div>\n            <div className=\"postBottom\">\n                <div className=\"postBottomLeft\">\n                    <img className=\"likeIcon\" src={`${pf}/football.png`} onClick = {likeHandler} alt=\"\" />\n                    <img className=\"likeIcon\" src={`${pf}/super.png`} onClick = {likeHandler} alt=\"\" />\n                    <span className=\"postLikeCounter\">{like} people like it</span>\n\n                </div>\n\n            </div>\n        </div>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}